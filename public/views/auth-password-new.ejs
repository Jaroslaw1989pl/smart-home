<%- include('../includes/auth-head.ejs') %>

<!-- STYLES -->

<!-- SCRIPTS -->
<script src="/scripts/auth-registration-form.js" defer></script>

  <main>

    <div id="content-left">

      <h1>Playfab</h1>
      <p>Sign in or create an account</p>

    </div>

    <div id="content-right">

      <div class="auth-panel">
  
        <% if (typeof isPasswordChanged !== 'undefined' && isPasswordChanged) { %>
  
          <header>
            <h1>Password changed successfully</h1>
            <p>Now you can login using new password.</p>
            <p>Return to <a href="/login">login page</a></p>
          </header>
  
        <% } else { %>
  
          <!-- SCRIPTS -->
          <script src="/scripts/auth-registration-actions.js" defer></script>

          <header>
            <h1>Change password</h1>
            <p>Enter new password.</p>
          </header>
  
          <form name="reset-password-form" action="/new-password" method="POST">
  
            <!-- User password error message -->
            <p id="pass-uniq-error" class="input-error<%= (typeof errors !== 'undefined' && errors.passUniq) ? ' active' : '' %>"><%= 
              (typeof errors !== 'undefined' && errors.passUniq) ? errors.passUniq : '' 
            %></p>
        
            <!-- User email -->
            <input type="hidden" name="userEmail" value="<%= email %>">
  
            <!-- token -->
            <input type="hidden" name="token" value="<%= token %>">
  
            <!-- User password input -->
            <!-- <label for="user-pass">New password</label><br>
            <input type="text" id="user-pass" name="userPass" class="registration-input" value="<%= 
              typeof inputs !== 'undefined' ? inputs.userPass : ''
            %>">
            <br><label for="user-pass" id="user-pass-error" style="color: red;">
              <%= typeof errors !== 'undefined' ? errors.userPass : '' %>
            </label>
            <section id="password-requirements">
              <strong><p>Create a password that:</p></strong>
              <ul id="requirements-list">
                <li id="password-length">contains at least 8 characters</li>
                <li id="password-letters">contains both lower (a-z) and upper case letters (A-Z)</li>
                <li id="password-symbols">contains at least one number (0-9) or underscore symbol</li>          
                <li id="password-alfa-num">does not contain non afpha numeric symbols</li>
              </ul>
            </section>
            <br> -->
  
            <!-- User password input -->  
            <!-- <label for="pass-conf">Confirm password</label><br>
            <input type="text" id="pass-conf" name="passConf" class="registration-input" value="<%= 
              typeof inputs !== 'undefined' ? inputs.passConf : ''
            %>">
            <br><label for="pass-conf" id="pass-conf-error" style="color: red;">
              <%= typeof errors !== 'undefined' ? errors.passConf : '' %>  
            </label> -->
            
  
  
            <!-- User password input -->
            <div class="form-input"> 
              <input type="password" id="user-pass" name="userPass" class="registration-input" placeholder="Password" value="<%= 
                typeof inputs !== 'undefined' ? inputs.userPass : ''
                %>">
              <input type="button" class="show-hide-btn" id="register-pass-toggle" value="">
            </div>
            <!-- User password error message -->
            <p id="user-pass-error" class="input-error<%= (typeof errors !== 'undefined' && errors.userPass) ? ' active' : '' %>"><%= 
              (typeof errors !== 'undefined' && errors.userPass) ? errors.userPass : '' 
            %></p>
            <!-- User password requirements -->
            <section id="user-pass-requirements" class="input-requirements">
              <strong><p>Create a password that:</p></strong>
              <ul id="user-pass-requirements-list">
                <li id="password-length">contains at least 8 characters</li>
                <li id="password-letters">contains both lower (a-z) and upper case letters (A-Z)</li>
                <li id="password-symbols">contains at least one number (0-9) or underscore symbol</li>          
                <li id="password-alfa-num">does not contain non afpha numeric symbols</li>
              </ul>
            </section>
          
            <!-- User password input -->
            <div class="form-input">
              <input type="password" id="pass-conf" name="passConf" class="registration-input" placeholder="Confirm password" value="<%= 
                typeof inputs !== 'undefined' ? inputs.passConf : ''
                %>">
              <input type="button" class="show-hide-btn" id="register-conf-toggle" value="">
            </div>
            <!-- User password error message -->
            <p id="pass-conf-error" class="input-error<%= (typeof errors !== 'undefined' && errors.passConf) ? ' active' : '' %>"><%= 
              (typeof errors !== 'undefined' && errors.passConf) ? errors.passConf : '' 
            %></p>
  
            
            <input type="submit" id="register-form-submit-btn" name="formSubmitBtn" value="Reset password" >
  
          </form>
  
        <% } %>
  
      </div>

    </div>

  </main>
  
<%- include('../includes/auth-footer.ejs') %>